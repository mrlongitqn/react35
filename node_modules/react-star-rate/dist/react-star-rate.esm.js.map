{"version":3,"file":"react-star-rate.esm.js","sources":["../src/star.tsx","../src/stars-rating.tsx"],"sourcesContent":["import * as React from 'react';\r\n\r\nimport { css, CSSAttribute } from 'goober';\r\n\r\nexport interface StarProps {\r\n  allowHalf?: boolean;\r\n  classNamePrefix?: string;\r\n  count?: number;\r\n  disabled?: boolean;\r\n  index?: number;\r\n  onClick?: (e: React.MouseEvent<HTMLLIElement>, index: number) => void;\r\n  onHover?: (e: React.MouseEvent<HTMLLIElement>, index: number) => void;\r\n  reverse?: boolean;\r\n  style?: { full?: CSSAttribute; half?: CSSAttribute; zero?: CSSAttribute };\r\n  styleFull?: { first?: CSSAttribute; second?: CSSAttribute };\r\n  styleFullHover?: { first?: CSSAttribute; second?: CSSAttribute };\r\n  styleHalf?: { first?: CSSAttribute; second?: CSSAttribute };\r\n  styleHalfHover?: { first?: CSSAttribute; second?: CSSAttribute };\r\n  styleHover?: {\r\n    full?: CSSAttribute;\r\n    half?: CSSAttribute;\r\n    zero?: CSSAttribute;\r\n  };\r\n  styleZero?: { first?: CSSAttribute; second?: CSSAttribute };\r\n  styleZeroHover?: { first?: CSSAttribute; second?: CSSAttribute };\r\n  symbol?: React.ReactNode;\r\n  value?: number;\r\n}\r\n\r\nexport class Star extends React.Component<StarProps> {\r\n  starRef?: HTMLLIElement | null;\r\n\r\n  onClick: React.MouseEventHandler<HTMLLIElement> = e => {\r\n    const { index, onClick } = this.props;\r\n    onClick!(e, index!);\r\n  };\r\n\r\n  onHover: React.MouseEventHandler<HTMLLIElement> = e => {\r\n    const { index, onHover } = this.props;\r\n    onHover!(e, index!);\r\n  };\r\n\r\n  getStarType = () => {\r\n    const { allowHalf, index, value } = this.props;\r\n    const starValue = index! + 1;\r\n\r\n    if (allowHalf && value! + 0.5 >= starValue && value! < starValue) {\r\n      return 'half';\r\n    } else if (starValue <= value!) {\r\n      return 'full';\r\n    }\r\n\r\n    return 'zero';\r\n  };\r\n\r\n  getValue = (x: number, reverse: boolean) => {\r\n    const { allowHalf, index } = this.props;\r\n    let value = index! + 1;\r\n    if (allowHalf) {\r\n      const doc = this.starRef!.ownerDocument;\r\n      const { body } = doc!;\r\n      const docElem = doc.documentElement;\r\n      const box = this.starRef?.getBoundingClientRect();\r\n      let left = box?.left;\r\n      left! -= docElem?.clientLeft || body.clientLeft || 0;\r\n      const w: Window = doc.defaultView || (doc as any).parentWindow;\r\n      let ret = w.pageXOffset;\r\n      const method = 'scrollLeft';\r\n      if (typeof ret !== 'number') {\r\n        ret = doc.documentElement[method];\r\n        if (typeof ret !== 'number') {\r\n          ret = doc.body[method];\r\n        }\r\n      }\r\n      left! += ret;\r\n      const width = this.starRef?.clientWidth;\r\n      if (!reverse && x - left! < width! / 2) {\r\n        value -= 0.5;\r\n      } else if (reverse && x - left! > width! / 2) {\r\n        value -= 0.5;\r\n      }\r\n    }\r\n\r\n    return value;\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      classNamePrefix,\r\n      count,\r\n      disabled,\r\n      index,\r\n      reverse,\r\n      style,\r\n      styleFull,\r\n      styleFullHover,\r\n      styleHalf,\r\n      styleHalfHover,\r\n      styleHover,\r\n      styleZero,\r\n      styleZeroHover,\r\n      symbol,\r\n      value,\r\n    } = this.props;\r\n\r\n    const symbolNode =\r\n      typeof symbol === 'function' ? symbol(this.props) : symbol;\r\n\r\n    const starType = this.getStarType();\r\n\r\n    const classNameMap = {\r\n      zero: `${classNamePrefix}__star--zero`,\r\n      half: `${classNamePrefix}__star--half`,\r\n      full: `${classNamePrefix}__star--full`,\r\n    };\r\n    const className = `${classNamePrefix}__star ${classNameMap[starType]}`;\r\n\r\n    const styleMap = { zero: styleZero, full: styleFull, half: styleHalf };\r\n    const styleHoverMap = {\r\n      zero: styleZeroHover,\r\n      full: styleFullHover,\r\n      half: styleHalfHover,\r\n    };\r\n\r\n    const FirstStarStyles = css`\r\n      position: absolute;\r\n      left: 0;\r\n      top: 0;\r\n      width: 50%;\r\n      height: 100%;\r\n      overflow: hidden;\r\n      opacity: 0;\r\n      transition: all 500ms ease;\r\n    `;\r\n\r\n    const FirstStarHoverStyles = css({\r\n      '&:hover': styleHoverMap[starType]?.first,\r\n    });\r\n\r\n    const SecondStarHoverStyles = css({\r\n      '&:hover': styleHoverMap[starType]?.second,\r\n    });\r\n\r\n    const StarActiveStyles = {\r\n      zero: '',\r\n      half: css`\r\n        .${FirstStarStyles} {\r\n          opacity: 1;\r\n          color: #ffd166;\r\n        }\r\n\r\n        &:hover {\r\n          .${FirstStarStyles} {\r\n            color: #ffe3a2;\r\n          }\r\n        }\r\n      `,\r\n      full: css`\r\n        color: #ffd166 !important;\r\n\r\n        &:hover {\r\n          color: #ffe3a2;\r\n        }\r\n      `,\r\n    };\r\n\r\n    const StarStyles = css`\r\n      margin: 0;\r\n      padding: 0;\r\n      display: inline-block;\r\n      margin-right: 8px;\r\n      position: relative;\r\n      color: #e8eaeb;\r\n      cursor: pointer;\r\n      transition: all 500ms ease;\r\n      ${reverse\r\n        ? `\r\n        margin-right: 0;\r\n        margin-left: 8px;\r\n        float: right;\r\n\r\n        .${FirstStarStyles} {\r\n            right: 0;\r\n            left: auto;\r\n        }\r\n      `\r\n        : ``}\r\n    `;\r\n\r\n    const StarHoverStyles = css({\r\n      '&:hover': styleHover![starType],\r\n    });\r\n\r\n    return (\r\n      <li\r\n        aria-checked={value! > index! ? 'true' : 'false'}\r\n        aria-label={`${index! + 1} out of ${count} stars`}\r\n        aria-posinset={index! + 1}\r\n        aria-setsize={count}\r\n        className={`${className} ${StarStyles} ${StarHoverStyles} ${StarActiveStyles[starType]}`}\r\n        onClick={disabled ? undefined : this.onClick}\r\n        onMouseMove={disabled ? undefined : this.onHover}\r\n        ref={ref => {\r\n          this.starRef = ref;\r\n        }}\r\n        role=\"radio\"\r\n        style={style![starType]}\r\n        tabIndex={disabled ? -1 : 0}\r\n      >\r\n        <div\r\n          aria-hidden=\"true\"\r\n          className={`${classNamePrefix}__star__first ${FirstStarStyles} ${FirstStarHoverStyles}`}\r\n          style={styleMap[starType]?.first}\r\n        >\r\n          {symbolNode}\r\n        </div>\r\n        <div\r\n          aria-hidden=\"true\"\r\n          className={`${classNamePrefix}__star__second ${SecondStarHoverStyles}`}\r\n          style={styleMap[starType]?.second}\r\n        >\r\n          {symbolNode}\r\n        </div>\r\n      </li>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Star;\r\n","import * as React from 'react';\r\n\r\nimport { setup, css, CSSAttribute } from 'goober';\r\nimport { prefix } from 'goober/prefixer';\r\n\r\nimport Star from './star';\r\n\r\nsetup(React.createElement, prefix);\r\n\r\nconst noop = () => {};\r\n\r\nexport interface StarsRatingProps {\r\n  allowClear?: boolean;\r\n  allowHalf?: boolean;\r\n  autoFocus?: boolean;\r\n  classNamePrefix?: string;\r\n  count?: number;\r\n  defaultValue?: number;\r\n  direction?: 'ltr' | 'rtl';\r\n  disabled?: boolean;\r\n  onBlur?: () => void;\r\n  onChange?: (value?: number) => void;\r\n  onFocus?: () => void;\r\n  onHoverChange?: (value?: number) => void;\r\n  style?: StarsRatingStyles;\r\n  symbol?: React.ReactNode;\r\n  tabIndex?: number;\r\n  value?: number;\r\n}\r\n\r\ntype StarsRatingStyles = {\r\n  style?: CSSAttribute;\r\n  full?: {\r\n    first?: CSSAttribute;\r\n    second?: CSSAttribute;\r\n    star?: CSSAttribute;\r\n  };\r\n  half?: {\r\n    first?: CSSAttribute;\r\n    second?: CSSAttribute;\r\n    star?: CSSAttribute;\r\n  };\r\n  zero?: {\r\n    first?: CSSAttribute;\r\n    second?: CSSAttribute;\r\n    star?: CSSAttribute;\r\n  };\r\n  hover?: Omit<StarsRatingStyles, 'hover'>;\r\n};\r\n\r\ninterface StarsRatingState {\r\n  clearedValue?: number;\r\n  hoverValue?: number;\r\n  value?: number;\r\n}\r\n\r\nclass StarsRating extends React.Component<StarsRatingProps, StarsRatingState> {\r\n  static defaultProps = {\r\n    allowClear: true,\r\n    allowHalf: true,\r\n    classNamePrefix: 'react-star-rate',\r\n    count: 5,\r\n    defaultValue: 0,\r\n    direction: 'ltr',\r\n    disabled: false,\r\n    onChange: noop,\r\n    onHoverChange: noop,\r\n    style: {},\r\n    symbol: 'â˜…',\r\n    tabIndex: 0,\r\n  };\r\n\r\n  ratingContainerRef?: HTMLUListElement | null;\r\n\r\n  starRefs?: { [key: number]: Star };\r\n\r\n  constructor(props: StarsRatingProps) {\r\n    super(props);\r\n\r\n    const { defaultValue, value } = props;\r\n\r\n    this.starRefs = {};\r\n\r\n    this.state = {\r\n      value: value ?? defaultValue,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { autoFocus, disabled } = this.props;\r\n    if (autoFocus && !disabled) {\r\n      this.focus();\r\n    }\r\n  }\r\n\r\n  static getDerivedStateFromProps(\r\n    nextProps: StarsRatingProps,\r\n    state: StarsRatingState\r\n  ) {\r\n    if ('value' in nextProps && nextProps.value !== undefined) {\r\n      return {\r\n        ...state,\r\n        value: nextProps.value,\r\n      };\r\n    }\r\n    return state;\r\n  }\r\n\r\n  onHover = (event: React.MouseEvent<HTMLLIElement>, index: number) => {\r\n    const { onHoverChange } = this.props;\r\n    const { clearedValue } = this.state;\r\n    const hoverValue = this.getStarValue(index, event.pageX);\r\n    if (hoverValue !== clearedValue) {\r\n      this.setState({\r\n        hoverValue,\r\n        clearedValue: undefined,\r\n      });\r\n    }\r\n    onHoverChange!(hoverValue);\r\n  };\r\n\r\n  onMouseLeave = () => {\r\n    const { onHoverChange } = this.props;\r\n    this.setState({\r\n      hoverValue: undefined,\r\n      clearedValue: undefined,\r\n    });\r\n    onHoverChange!(undefined);\r\n  };\r\n\r\n  onClick = (event: React.MouseEvent, index: number) => {\r\n    const { allowClear } = this.props;\r\n    const { value } = this.state;\r\n    const newValue = this.getStarValue(index, event.pageX);\r\n    const isClear = allowClear ? newValue === value : false;\r\n    this.onMouseLeave();\r\n    this.changeValue(isClear ? 0 : newValue);\r\n    this.setState({\r\n      clearedValue: isClear ? newValue : undefined,\r\n    });\r\n  };\r\n\r\n  onFocus = () => {\r\n    const { onFocus } = this.props;\r\n    onFocus && onFocus();\r\n  };\r\n\r\n  onBlur = () => {\r\n    const { onBlur } = this.props;\r\n    onBlur && onBlur();\r\n  };\r\n\r\n  changeValue = (value: number) => {\r\n    const { onChange } = this.props;\r\n    if (!('value' in this.props)) {\r\n      this.setState({\r\n        value,\r\n      });\r\n    }\r\n    onChange!(value);\r\n  };\r\n\r\n  saveStarRef = (index: number) => (node: Star) => {\r\n    this.starRefs![index] = node;\r\n  };\r\n\r\n  getStarValue = (index: number, x: number) => {\r\n    const { direction } = this.props;\r\n    const reverse = direction === 'rtl';\r\n    return this.starRefs![index].getValue(x, reverse);\r\n  };\r\n\r\n  focus = () => {\r\n    const { disabled } = this.props;\r\n    if (!disabled) {\r\n      this.ratingContainerRef?.focus();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      allowHalf,\r\n      classNamePrefix,\r\n      count,\r\n      direction,\r\n      disabled,\r\n      style,\r\n      symbol,\r\n      tabIndex,\r\n    } = this.props;\r\n    const { hoverValue, value } = this.state;\r\n\r\n    const stars = [];\r\n    for (let index = 0; index < (count ?? 0); index++) {\r\n      stars.push(\r\n        <Star\r\n          allowHalf={allowHalf}\r\n          classNamePrefix={classNamePrefix}\r\n          count={count}\r\n          disabled={disabled}\r\n          index={index}\r\n          key={index}\r\n          ref={this.saveStarRef(index)}\r\n          onClick={this.onClick}\r\n          onHover={this.onHover}\r\n          reverse={direction === 'rtl'}\r\n          style={{\r\n            full: style?.full?.star,\r\n            half: style?.half?.star,\r\n            zero: style?.zero?.star,\r\n          }}\r\n          styleFull={style?.full}\r\n          styleFullHover={style?.hover?.full}\r\n          styleHalf={style?.half}\r\n          styleHalfHover={style?.hover?.half}\r\n          styleHover={{\r\n            full: style?.hover?.full?.star,\r\n            half: style?.hover?.half?.star,\r\n            zero: style?.hover?.zero?.star,\r\n          }}\r\n          styleZero={style?.zero}\r\n          styleZeroHover={style?.hover?.zero}\r\n          symbol={symbol}\r\n          value={hoverValue === undefined ? value : hoverValue}\r\n        />\r\n      );\r\n    }\r\n\r\n    const ListContainerStyles = css`\r\n      margin: 0;\r\n      padding: 0;\r\n      list-style: none;\r\n      font-size: 40px;\r\n      display: inline-block;\r\n      vertical-align: middle;\r\n      font-weight: normal;\r\n      font-style: normal;\r\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,\r\n        Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\r\n    `;\r\n\r\n    const ListContainerHoverStyles = css({\r\n      '&:hover': style?.hover?.style,\r\n    });\r\n\r\n    return (\r\n      <ul\r\n        aria-label=\"Stars Rating\"\r\n        className={`${classNamePrefix} ${ListContainerStyles} ${ListContainerHoverStyles} ${\r\n          direction === 'rtl'\r\n            ? `${classNamePrefix}--rtl ${css`\r\n                direction: rtl;\r\n              `}`\r\n            : `${classNamePrefix}--ltr ${css`\r\n                direction: ltr;\r\n              `}`\r\n        }`}\r\n        onBlur={this.onBlur}\r\n        onFocus={this.onFocus}\r\n        onMouseLeave={disabled ? undefined : this.onMouseLeave}\r\n        ref={ref => {\r\n          this.ratingContainerRef = ref;\r\n        }}\r\n        role=\"radiogroup\"\r\n        style={style?.style}\r\n        tabIndex={disabled ? -1 : tabIndex}\r\n      >\r\n        {stars}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nexport default StarsRating;\r\n"],"names":["Star","e","props","index","onClick","onHover","allowHalf","value","starValue","x","reverse","doc","starRef","ownerDocument","body","docElem","documentElement","box","getBoundingClientRect","left","clientLeft","w","defaultView","parentWindow","ret","pageXOffset","method","width","clientWidth","render","classNamePrefix","count","disabled","style","styleFull","styleFullHover","styleHalf","styleHalfHover","styleHover","styleZero","styleZeroHover","symbol","symbolNode","starType","getStarType","classNameMap","zero","half","full","className","styleMap","styleHoverMap","FirstStarStyles","css","FirstStarHoverStyles","first","SecondStarHoverStyles","second","StarActiveStyles","StarStyles","StarHoverStyles","React","undefined","onMouseMove","ref","role","tabIndex","setup","prefix","noop","StarsRating","event","onHoverChange","clearedValue","state","hoverValue","getStarValue","pageX","setState","allowClear","newValue","isClear","onMouseLeave","changeValue","onFocus","onBlur","onChange","node","starRefs","direction","getValue","ratingContainerRef","focus","defaultValue","componentDidMount","autoFocus","getDerivedStateFromProps","nextProps","stars","push","key","saveStarRef","star","hover","ListContainerStyles","ListContainerHoverStyles"],"mappings":"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"}